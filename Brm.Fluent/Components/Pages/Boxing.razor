@page "/boxing"
@page "/boxing/{boxNo}"
@page "/boxing/{boxNo}/{tabId}"

@inject SessionService sessionservice
@inject BRMDbService db

<BrmPageTitle Title="@(sessionservice.session.IsRmc() ? "Re-Boxing":"Batching")"/>

<FluentTabs @bind-ActiveTabId="@tabId">
    <FluentTab Label="Batching" Id="tab-1">
        @if (sessionservice.session.IsRmc())
        {
            <RMCBatch></RMCBatch>
        }
        else
        {
            <LOBatch></LOBatch>
        }
    </FluentTab>
    <FluentTab Label="Waybills" Id="tab-2">
        <BatchWaybill></BatchWaybill>
    </FluentTab>
    <FluentTab Label="Re-Boxing" Disabled="@(!sessionservice.session.IsRmc())" Id="tab-3">
        <ReboxTab boxNo="@boxNo"></ReboxTab>
    </FluentTab>
    <FluentTab Label="TDW Dispatch" Disabled="@(!sessionservice.session.IsRmc())" Id ="tab-4">
        <TdwBatch></TdwBatch>
    </FluentTab> 
</FluentTabs>

@code 
{
    [Parameter]
    public string boxNo { get; set; } = "";
    [Parameter]
    public string tabId { get; set; } = "tab-1";

    protected override void OnInitialized()
    {
            if (sessionservice.session.IsRmc())
            {
                tabId = "tab-3";
            }
    }
}
