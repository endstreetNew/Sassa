@page "/boxing"
@page "/boxing/{boxNo}"
@page "/boxing/{boxNo}/{tabId:int}"

@inject SessionService sessionservice
@inject BRMDbService db

<TabControl PageActivate="OnPageActivate" ActivePageId="@tabId">
    <TabPage Text="Batching" Id="1" Enabled="true">
        @if (sessionservice.session.IsRmc())
        {
            <RMCBatch></RMCBatch>
        }
        else
        {
            <LOBatch></LOBatch>
        }
    </TabPage>
    <TabPage Text="Waybills" Id="2" Enabled="true">
        <BatchWaybill></BatchWaybill>
    </TabPage>
    <TabPage Text="Re-Boxing" Id="3" Enabled="@(sessionservice.session.Office.OfficeType != "LO")">
        <ReboxTab boxNo="@boxNo"></ReboxTab>
    </TabPage>
    <TabPage Text="TDW Dispatch" Id="4" Enabled="@(sessionservice.session.Office.OfficeType != "LO")">
        <TdwBatch></TdwBatch>
    </TabPage>
</TabControl>


@code 
{
    [Parameter]
    public string boxNo { get; set; } = "";
    [Parameter]
    public int tabId { get; set; }

    protected override void OnInitialized()
    {
        if (tabId == 0)
        {
            if (sessionservice.session.IsRmc())
            {
                tabId = 3;
            }
            else
            {
                tabId = 1;
            }
        }

    }

    private void OnPageActivate(int e)
    {
        tabId = e;
    }


}
