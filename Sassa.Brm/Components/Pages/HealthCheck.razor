@page "/healthcheck"
@using Sassa.Brm.Health
@inject DailyCheck check
@inject SessionService session
@inject IAlertService toast

<button class="btn btn-primary btn-sm active" @onclick="() => SaveReport()">Save Health check</button>
<hr/>
@((MarkupString)check.GenerateHealthCheckReport(session.session.Name, 10, DateTime.Now))

@code {

    public async Task SaveReport()
    {
        try
        {
            await check.WriteDailyReport(session.session.Name, 10, DateTime.Now);
            //await csService.UploadHealthDoc(check.GenerateHealthCheckReport(session.session.Name, 10, DateTime.Now));
            toast.Success("Healthcheck saved.");
        }
        catch(Exception ex)
        {
            toast.Error("Healthcheck already saved.");
        }
    }

}
